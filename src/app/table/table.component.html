<h1>–°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h1>

<div *ngIf="!hidePopUp" class="popup">
    <div class="popup__content">
        <h3>–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?</h3>
        <div class="popup__btns">
            <button (click)="deleteStudent()">–î–∞</button>
            <button (click)="hidePopUp = true">–ù–µ—Ç</button>
        </div>
    </div>
</div>

<div class="table">
    <table>
        <tr class="table__filters">
            <th></th>
            <th colspan="3">
                <div class="table__block-search">
                    <input #name type="text" placeholder="–ü–æ–∏—Å–∫ —Å—Ç—É–¥–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä. –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω)">
                    <button (click)="searchName = name.value">üîç</button>
                </div>
            </th>
            <th>
                <div  class="table__filter">
                    <div>
                        <label for="min-grade"> —Å </label>
                        <input (change)="minGradeForFiltr = number(minGrade.value)" #minGrade type="number" id="min-grade" value="0" min="0" max="5">
                    </div>
                    <div>
                        <label for="max-grade"> –ø–æ </label>
                        <input (change)="maxGradeForFiltr = number(maxGrade.value)" #maxGrade type="number" id="max-grade" value="5" min="0" max="5">
                    </div>
                </div>
            </th>
            <th>
                <div class="table__filter">
                    <div>
                        <label for="min-date"> —Å </label>
                        <input (change)="minDateForFiltr = minDate.value" #minDate type="date" id="min-date">
                    </div>
                    <div>
                        <label for="max-date"> –ø–æ </label>
                        <input (change)="maxDateForFiltr = maxDate.value" #maxDate type="date" id="max-date">
                    </div>
                </div>
            </th>
            <th>
                <div class="table__reset">
                    <button [btnReset]="resetFilters.bind(this)" (click)="minGrade.value = '0'; maxGrade.value='5';
                    name.value = ''; minDate.value = ''; maxDate.value = ''">–°–±—Ä–æ—Å</button>
                </div>
            </th>
        </tr>
        <tr>
            <th></th>
            <th><button (click)="sortSName()">–§–∞–º–∏–ª–∏—è</button></th>
            <th><button (click)="sortName()">–ò–º—è</button></th>
            <th><button (click)="sortPatronymic()">–û—Ç—á–µ—Å—Ç–≤–æ</button></th>
            <th><button (click)="sortGrade()">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</button></th>
            <th><button (click)="sortDate()">–î–∞—Ç–∞ –†–æ–∂–¥–µ–Ω–∏—è</button></th>
            <th></th>
        </tr>
        <tr #trInfo [class.background-yellow]="comparisonOfNames(item)" 
        [class.background-red]="isBadStudent(item) && highlightBadStudents"
        *ngFor="let item of students; let i = index">
            <ng-container *ngIf="gradeIsInRange(item.averageScore) && dateIsInRange(item.dateOfBirth) && item.isNecessary" >
                <td><button [btnEdit]="resetStudent" (click)="studentForChange=item; resetStudent=true; numberStudent=i"><p>‚úé</p></button></td>
                <td>{{item.secondName | name}}</td>
                <td>{{item.name | name}}</td>
                <td>{{item.patronymic | name}}</td>
                <td>{{item.averageScore | grade}}</td>
                <td>{{item.dateOfBirth | date}}</td>
                <td id="remove-student"><button (click)="hidePopUp = false; studentForDelete = item">√ó</button></td>
            </ng-container>
        </tr>
    </table>
    <div>
        <input type="checkbox" id="checkbox" checked [(ngModel)]="highlightBadStudents"/>
        <label for="checkbox"> - –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –ø–ª–æ—Ö–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</label>
    </div>
    <app-form [numberStudent]="numberStudent" [person]="studentForChange" [editing]="resetStudent" [students]="students" 
    (feedbackEditing)="resetStudent=false" (addStudent)="changeList($event)"></app-form>
</div>
